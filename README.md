# Проект ETL: Загрузка данных и отправка уведомлений

Этот проект выполняет процесс извлечения данных (ETL) из базы данных, получения информации с API и возвращения данных обратно в базу данных. В конце процесса отправляется уведомление по электронной почте о статусе выполнения задачи.

## Описание

1. **Извлечение данных**: Проект получает информацию о последней дате из базы данных.
2. **Вызов API**: Используя полученную дату, отправляется запрос к API для получения данных.
3. **Загрузка в базу данных**: Полученные данные загружаются обратно в базу данных.
4. **Отправка уведомлений**: В конце процесса отправляется уведомление на электронную почту с сообщением об успешном завершении или ошибке.

## Структура проекта

Проект состоит из нескольких модулей, каждый из которых выполняет свою задачу.

### `main.py`

Основной модуль проекта, который координирует все действия:

- **`main()`** — Главная функция, которая выполняет все этапы ETL-процесса: извлечение данных, вызов API, загрузка данных в базу данных и отправка уведомлений.
- **`send_error_mail()`** — Отправка уведомления по электронной почте о возникшей ошибке.
- **`send_success_mail()`** — Отправка уведомления о успешном завершении процесса.

### `extract.py`

Модуль для извлечения данных:

- **`extract_data()`** — Извлекает последние данные из базы данных (например, последнюю дату).
- **`calculate_fetch_window()`** — Рассчитывает диапазон дат для запроса к API.
- **`get_last_date()`** — Возвращает последнюю дату, которая была извлечена из базы данных, для использования в API-запросе.

### `load.py`

Модуль для загрузки данных в базу данных:

- **`load_to_db()`** — Загрузит полученные данные обратно в базу данных.

### `mail.py`

Модуль для отправки уведомлений по электронной почте:

- **`send_error_mail()`** — Отправка сообщения с ошибкой, если процесс завершился неудачно.
- **`send_success_mail()`** — Отправка сообщения о успешном завершении процесса.


main.py		    main() -> extract_data()+load_to_db()  ( send_error_mail() / send_secces_mail() )
exact.py 		exact_data() ->  calculate_fetch_window() -> get_last_date() 
load.py 		load_to_db()
mail.py 		send_error_mail() , send_secces_mail()